<!doctype html>
<html lang="sk">
  <head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="SPy o.z.">
    <link rel="icon" href="/static/img/logo/favicon.ico" sizes="16x16">
    <title>Print: Učíme s Hardvérom</title>
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/python.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  </head>

  <body>

    <main role="main">

      <div class="container">
            <h1>Online editor</h1>
            <div class="alert alert-warning">
<p class="h4">Online editor je fajn, ale...</p>
<p>odporúčame radšej používať Mu editor, nakoľko má viac funkcionalít. Online editor pomôže tam, kde potrebujeme rýchlo nahrať nejaký program do Micro:bitu bez inŠtalácie Mu editoru (napríklad aj na workshopoch).</p>
</div>
<p><a href="http://python.microbit.org/">Online MicroPython Editor</a> je ďaľší online editor, no tento krát je určený pre tvorby MicroPython kódu. Ani pri tomto spôsobe programovania nie je potrebná inštalácia softvéru na počítač či administrátorské práva, stačí prístup na internet a internetový prehliadač.</p>
<p>Na obrazovke sa Vám ukáže jednoduchý program:</p>
<pre><code class="python"># Add your Python code here. E.g.
from microbit import *


while True:
    display.scroll('Hello, World!')
    display.show(Image.HEART)
    sleep(2000)
</code></pre>
<ul>
<li><strong>from micobit import *</strong> - tento príkaz nám v kóde sprístupní všetku funkcionalitu knižnice microbit, vďaka ktorej vieme pristupovať k hardérovej funkcionalite micro:bitu.</li>
<li><strong>while True:</strong> - tento príkaz nám bude donekonečna vykonávať kód, ktorý prislúcha do daného while cyklu</li>
<li><strong>Indentácia</strong> . v Pythone (na rozdiel od iných jazykov) sa kód prislúchajúci do bloku neoznačuje zátvorkami, ale pomocou odsadzovania, čiže indentácie. Aby nejaký kód prislúchal pod príkaz <em>while</em>, musí byť odsadený aspoň o jeden tabulátor (štyri medzerníky)</li>
<li><strong>display.scroll()</strong> vypíše daný reťazec na obrazovku</li>
<li><strong>display.show(Image.HEART)</strong> vykreslí daný obrázok na obrazovku</li>
<li><strong>sleep()</strong> - funkcia sleep pozastaví micro:bit na zadaný počet milisekúnd</li>
<li><strong>poznámky</strong> - poznámky sa v Pythone tvoria mriežkou (#)</li>
</ul>
<p>Ako ale zistíme, aké možné obrázky môžeme vykresliť? Na to nám slúži <a href="http://microbit-micropython.readthedocs.io/en/latest/tutorials/images.html">online micro:bit MicroPython dokumentácia</a>, v ktorej je zoznam všetkých príkazov, ktoré je možné použiť.</p>
<p>Posledná zmena: <strong>28.2.2020</strong></p>
      </div>

    </main>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="/static/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="/static/js/vendor/popper.min.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/js/vendor/holder.min.js"></script>


    <script>

      /* message signatures
      export interface RenderBlocksRequestMessage extends SimulatorMessage {
          type: "renderblocks",
          id: string;
          code: string;
          options?: {
              package?: string;
              packageId?: string;
              snippetMode?: boolean;
          }
      }

      export interface RenderBlocksResponseMessage extends SimulatorMessage {
          source: "makecode",
          type: "renderblocks",
          id: string;
          svg?: string;
          width?: number;
          height?: number;
      }*/

      var makeCodeRenderPre = makeCodeRenderPre || (function () {
          // pre waiting to be rendered
          // when undefined, iframe is loaded and ready
          var pendingPres = [];
          function injectRenderer() {
              var f = document.getElementById("makecoderenderer");
              // check iframe already added to the DOM
              if (f) {
                  return;
              }
              var f = document.createElement("iframe");
              f.id = "makecoderenderer";
              f.style.position = "absolute";
              f.style.left = 0;
              f.style.bottom = 0;
              f.style.width = "1px";
              f.style.height = "1px";
              f.src = "https://makecode.microbit.org/--docs?render=1"
              document.body.appendChild(f);
          }

          function renderPre(pre) {
              console.log('render ' + pre.id)
              var f = document.getElementById("makecoderenderer");
              // check if iframe is added and ready (pendingPres is undefined)
              if (!f || !!pendingPres) {
                  // queue up
                  pendingPres.push(pre);
                  injectRenderer();
              } else {
                  f.contentWindow.postMessage({
                      type: "renderblocks",
                      id: pre.id,
                      code: pre.innerText,
                      options: {
                        packageId: pre.getAttribute("data-packageid")
                      }
                  }, "https://makecode.microbit.org/");
              }
          }

          // listen for messages
          window.addEventListener("message", function (ev) {
              var msg = ev.data;
              if (msg.source != "makecode") return;

              console.log(msg.type)
              switch (msg.type) {
                  case "renderready":
                      // flush pending requests                   
                      var pres = pendingPres;
                      // set as undefined to notify that iframe is ready
                      pendingPres = undefined;
                      pres.forEach(function (pre) { renderPre(pre); })
                      break;
                  case "renderblocks":
                      var svg = msg.svg; // this is an string containing SVG
                      var id = msg.id; // this is the id you sent

                      var xhttp = new XMLHttpRequest();
                      xhttp.open("POST", "http://127.0.0.1:5000/materialy/save_makecode_image/"+msg.id, true);
                      xhttp.send(msg.uri);


                      // replace text with svg
                      var img = document.createElement("img");
                      img.src = msg.uri;
                      img.width = msg.width;
                      img.height = msg.height;
                      var code = document.getElementById(id);
                      code.parentElement.insertBefore(img, code)
                      code.parentElement.removeChild(code);
                      break;
              }
          }, false);

          return renderPre;
      })();

      function renderSnippets() {
          // TODO ADD RENDER LOGIC HERE
          let pres = document.getElementsByTagName("pre");
          Array.prototype.forEach.call(pres, function (pre) {
              makeCodeRenderPre(pre);
          })
      }

      // load the renderer
      renderSnippets();

      </script>

  </body>
</html>